@page
@model LandingModel
@{
    ViewData["Title"] = "Welcome";
    Layout = "_Layout";
}

<div class="landing-container">
    <div class="landing-hero">
        <h1 class="landing-title">üß† AI Decision Council</h1>
        <p class="landing-tagline">Collaborative AI-powered decision making</p>
        <p class="landing-description">
            Harness the power of multiple AI agents to gain diverse perspectives and make better decisions. 
            The AI Decision Council brings together diverse AI models to debate, refine, and deliver comprehensive recommendations.
        </p>
    </div>

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="auth-error-message">
            <div class="auth-error-icon">‚ö†Ô∏è</div>
            <div class="auth-error-text">@Model.ErrorMessage</div>
        </div>
    }

    <div class="sign-in-section">
        @if (Model.AuthenticationEnabled)
        {
            <h2 class="sign-in-title">Sign in to continue</h2>
            <p class="sign-in-subtitle">Choose your preferred authentication method</p>

            <div class="sign-in-buttons">
                <form method="post" asp-page-handler="SignInEntraId">
                    <button type="submit" class="btn-sign-in btn-entra" title="Sign in with Entra ID (Microsoft Work/School Account)">
                        <svg class="sign-in-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" fill="currentColor">
                            <path d="M0 0h10.931v10.931H0zm12.069 0H23v10.931H12.069zM0 12.069h10.931V23H0zm12.069 0H23V23H12.069z"/>
                        </svg>
                        <span>Sign in with Entra ID</span>
                    </button>
                </form>

                <form method="post" asp-page-handler="SignInMicrosoft">
                    <button type="submit" class="btn-sign-in btn-microsoft" title="Sign in with Microsoft Account (Personal)">
                        <svg class="sign-in-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" fill="currentColor">
                            <path d="M0 0h10.931v10.931H0zm12.069 0H23v10.931H12.069zM0 12.069h10.931V23H0zm12.069 0H23V23H12.069z"/>
                        </svg>
                        <span>Sign in with Microsoft Account</span>
                    </button>
                </form>

                <form method="post" asp-page-handler="SignInGoogle">
                    <button type="submit" class="btn-sign-in btn-google" title="Sign in with Google">
                        <svg class="sign-in-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
                            <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
                            <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
                            <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
                            <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
                            <path fill="none" d="M0 0h48v48H0z"/>
                        </svg>
                        <span>Sign in with Google</span>
                    </button>
                </form>
            </div>
        }
        else
        {
            <h2 class="sign-in-title">Development Mode</h2>
            <p class="sign-in-subtitle">Authentication is disabled for testing</p>

            <div class="sign-in-buttons">
                <form method="post" asp-page-handler="AccessApp">
                    <button type="submit" class="btn-sign-in btn-test-access" title="Access the application with a test account">
                        <svg class="sign-in-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <span>Access the App</span>
                    </button>
                </form>
            </div>
            
            @* <div class="dev-mode-notice">
                <p>‚ö†Ô∏è Authentication is currently disabled. This should only be used for development and testing.</p>
                <p>To enable authentication, set <code>"Authentication": { "Enabled": true }</code> in appsettings.json</p>
            </div> *@
        }
    </div>

    <div class="landing-footer">
        <p class="landing-footer-text">
            By signing in, you agree to use this application in accordance with organizational policies.
        </p>
    </div>
</div>

<style>
/* Hide header and scroll buttons on landing page */
.header {
    display: none !important;
}

#scrollFabContainer {
    display: none !important;
}

.main-content {
    padding-top: 0 !important;
}

.landing-container {
    max-width: 600px;
    margin: 4rem auto;
    padding: 0 2rem;
}

.landing-hero {
    text-align: center;
    margin-bottom: 3rem;
}

.landing-title {
    font-size: 3rem;
    font-weight: 700;
    color: var(--text-color);
    margin-bottom: 0.5rem;
}

.landing-tagline {
    font-size: 1.5rem;
    color: var(--text-secondary);
    margin-bottom: 1rem;
    font-weight: 500;
}

.landing-description {
    font-size: 1.1rem;
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 0;
}

.auth-error-message {
    background-color: #fee;
    border: 2px solid #c33;
    border-radius: 8px;
    padding: 1.25rem;
    margin-bottom: 2rem;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
}

.auth-error-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
}

.auth-error-text {
    color: #c33;
    font-size: 1rem;
    line-height: 1.5;
}

.sign-in-section {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 2.5rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.sign-in-title {
    font-size: 1.75rem;
    font-weight: 600;
    color: var(--text-color);
    margin-bottom: 0.5rem;
    text-align: center;
}

.sign-in-subtitle {
    color: var(--text-secondary);
    text-align: center;
    margin-bottom: 2rem;
}

.sign-in-buttons {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.sign-in-buttons form {
    width: 100%;
}

.btn-sign-in {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 0.875rem 1.5rem;
    font-size: 1rem;
    font-weight: 500;
    border: 2px solid;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    background: white;
}

.sign-in-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

.btn-entra {
    border-color: #0078d4;
    color: #0078d4;
}

.btn-entra:hover {
    background: #0078d4;
    color: white;
}

.btn-microsoft {
    border-color: #00a4ef;
    color: #00a4ef;
}

.btn-microsoft:hover {
    background: #00a4ef;
    color: white;
}

.btn-google {
    border-color: #4285f4;
    color: #4285f4;
}

.btn-google:hover {
    background: #4285f4;
    color: white;
}

.btn-google:hover .sign-in-icon path {
    fill: white !important;
}

.btn-test-access {
    border-color: #10a37f;
    color: #10a37f;
    font-weight: 600;
}

.btn-test-access:hover {
    background: #10a37f;
    color: white;
}

.dev-mode-notice {
    margin-top: 2rem;
    padding: 1.25rem;
    background: #fff3cd;
    border: 2px solid #ffc107;
    border-radius: 8px;
}

.dev-mode-notice p {
    margin: 0.5rem 0;
    color: #856404;
    font-size: 0.9rem;
    line-height: 1.5;
}

.dev-mode-notice p:first-child {
    font-weight: 600;
}

.dev-mode-notice code {
    background: rgba(0, 0, 0, 0.1);
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
}

.landing-footer {
    margin-top: 3rem;
    text-align: center;
}

.landing-footer-text {
    color: var(--text-secondary);
    font-size: 0.875rem;
    line-height: 1.5;
}

@@media (max-width: 768px) {
    .landing-container {
        margin: 2rem auto;
        padding: 0 1rem;
    }

    .landing-title {
        font-size: 2rem;
    }

    .landing-tagline {
        font-size: 1.25rem;
    }

    .landing-description {
        font-size: 1rem;
    }

    .sign-in-section {
        padding: 1.5rem;
    }
}
</style>